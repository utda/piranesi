(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{568:function(t,e,r){"use strict";r.r(e);r(22),r(23),r(6),r(54),r(40),r(33),r(34),r(41);var n=r(14),o=r(21),l=r(30),c=r(29),h=r(26),f=r(20),d=r(13),m=r(55),_=r(63),v=r.n(_),y=r(468);function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var o=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var x=function(t,e,r,desc){var n,o=arguments.length,l=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(l=(o<3?n(l):o>3?n(e,r,l):n(e,r))||l);return o>3&&l&&Object.defineProperty(e,r,l),l},j=function(t){Object(c.a)(d,t);var e,r,h,f=C(d);function d(){var t;return Object(o.a)(this,d),(t=f.apply(this,arguments)).baseUrl="https://piranesi.dl.itc.u-tokyo.ac.jp",t.title="",t.latin="",t.fileNoMap={},t}return Object(l.a)(d,[{key:"head",value:function(){return{title:"Compare"}}},{key:"created",value:function(){this.init()}},{key:"init",value:(h=Object(n.a)(regeneratorRuntime.mark((function t(){var e,r,n,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get(this.baseUrl+"/json/edificio.json").then((function(t){return t.data}));case 2:if(e=t.sent,r=this.$route.query.Edificio_IL,n={},this.$route.query.Edificio_IL)n=e[r];else if(this.$route.query.map_no)for(o in e)o.includes("["+this.$route.query.map_no+"]")&&(n=e[o]);else if(this.$route.query.map_area)for(l in e)l.includes("["+this.$route.query.map_area+"]")&&(n=e[l]);this.title=n.label,this.latin=n.i,this.getPhoto();case 9:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"getPhoto",value:(r=Object(n.a)(regeneratorRuntime.mark((function t(){var e,r,n,o,l,c,h,f,d,i,m,_,v,y,C,x,j,w,data,k,I;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.$store,null!=(r=e.state).index4Photo){t.next=8;break}return t.next=5,this.$searchUtils.createIndexFromIIIFCollection("https://piranesi.dl.itc.u-tokyo.ac.jp/data/photo/iiif/top.json");case 5:n=t.sent,e.commit("setIndex4Photo",n.index),e.commit("setData4Photo",n.data);case 8:for(f in o=r.index4Photo,l=r.data4Photo,c=[],h=o.Edificio_all)if(f.includes(this.title))for(d=h[f],i=0;i<d.length;i++)m=d[i],c.includes(m)||c.push(m);if(this.title.includes("[")&&this.title.includes("]"))for(v in _="["+this.title.split("[")[1].split("]")[0]+"]",h)if(v.includes(_))for(y=h[v],C=0;C<y.length;C++)x=y[C],c.includes(x)||c.push(x);for(j={},w=0;w<c.length;w++)data=l[c[w]],k=data._source,I=void 0,I=k.file_n1&&k.file_n1.length>0?k.file_n1[0]:k.photo_no[0],j[I]&&null!=j[I].photo&&(I=this.$utils.formatArrayValue(k.photo_no)),j[I]||(j[I]={photo:null,print:null}),j[I].photo=data;this.getPrint(j);case 17:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"getPrint",value:(e=Object(n.a)(regeneratorRuntime.mark((function t(e){var r,n,o,data,l,c,map,h,f,i,d,m,_,v,y,C,x,j,w,k;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.$store,null!=(n=r.state).index){t.next=8;break}return t.next=5,this.$searchUtils.createIndexFromIIIFCollection("https://piranesi.dl.itc.u-tokyo.ac.jp/data/print/iiif/top.json");case 5:o=t.sent,r.commit("setIndex",o.index),r.commit("setData",o.data);case 8:for(h in data=n.data,l=n.index,c=[],map=l.Edificio_all)if(h.includes(this.title))for(f=map[h],i=0;i<f.length;i++)d=f[i],c.includes(d)||c.push(d);if(this.title.includes("[")&&this.title.includes("]"))for(_ in m="["+this.title.split("[")[1].split("]")[0]+"]",map)if(_.includes(m))for(v=map[_],y=0;y<v.length;y++)C=v[y],c.includes(C)||c.push(v[y]);for(x=0;x<c.length;x++)j=c[x],w=data[j]._source,k=this.$utils.formatArrayValue(w.file_no),e[k]&&null!=e[k].print&&(k=this.$utils.formatArrayValue(w.image_ID)),e[k]||(e[k]={photo:null,print:null}),e[k].print=data[j];this.fileNoMap=e;case 16:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"getUrl",value:function(t){var e={window:{},windows:[{manifestId:t.photo._id},{manifestId:t.print._id}]};return this.baseUrl+"/mirador/?config="+JSON.stringify(e)}}]),d}(m.Vue),w=j=x([Object(m.Component)({components:{CardItem:y.a}})],j),k=r(49),I=r(82),O=r.n(I),$=r(175),R=r(424),P=r(418),U=r(433),V=r(414),D=r(376),M=r(434),component=Object(k.a)(w,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-container",[r("h2",{staticClass:"my-5"},[t._v("\n      "+t._s(t.title)+" "),r("i",[t._v(t._s(t.latin))])]),t._v(" "),r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-card",{staticClass:"mb-10",attrs:{flat:"",outlined:""}},[r("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[r("span",{staticClass:"mr-5"},[t._v(t._s(t.$t("Prints and photos from the same angle")))])]),t._v(" "),r("div",{staticClass:"pa-5 text-center"},[t._l(t.fileNoMap,(function(e,n){return[null!=e.photo&&null!=e.print?[r("p",{key:n,staticClass:"mb-5"},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6"}},[r("CardItem",{attrs:{item:{path:{name:"photo-id",params:{id:e.photo._source.photo_no[0]}},label:e.photo._source._title[0],image:e.photo._source._image[0],manifest:e.photo._id,url:t.baseUrl+"/photo/"+e.print._source._title[0]}}})],1),t._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("CardItem",{attrs:{item:{path:{name:"item-id",params:{id:e.print._source.file_no[0]}},label:e.print._source.title[0],image:e.print._source._image[0],manifest:e.print._id,url:t.baseUrl+"/item/"+e.print._source._title[0]}}})],1)],1),t._v(" "),r("v-btn",{staticClass:"mt-5",attrs:{color:"primary",href:t.getUrl(e),target:"_blank"}},[t._v("Miradorで比較する")]),t._v(" "),r("v-divider",{staticClass:"my-10"})],1)]:t._e()]}))],2)],1)],1),t._v(" "),r("v-col",{attrs:{cols:"12",sm:"6"}},[r("v-card",{staticClass:"mb-10",attrs:{flat:"",outlined:""}},[r("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[r("span",{staticClass:"mr-5"},[t._v(t._s(t.$t("Other prints")))])]),t._v(" "),r("div",{staticClass:"pa-5 text-center"},[r("v-row",[t._l(t.fileNoMap,(function(e,n){return[!e.photo&&e.print?[r("v-col",{key:n,attrs:{cols:"12",sm:"6"}},[r("CardItem",{attrs:{item:{path:{name:"item-id",params:{id:e.print._source.file_no[0]}},label:e.print._source.title[0],image:e.print._source._image[0],manifest:e.print._id,url:t.baseUrl+"/item/"+e.print._source._title[0]}}})],1)]:t._e()]}))],2)],1)],1),t._v(" "),r("v-card",{staticClass:"mb-10",attrs:{flat:"",outlined:""}},[r("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[r("span",{staticClass:"mr-5"},[t._v(t._s(t.$t("Photos")))])]),t._v(" "),r("div",{staticClass:"pa-5 text-center"},[r("v-row",[t._l(t.fileNoMap,(function(e,n){return[e.photo&&!e.print?[r("v-col",{key:n,attrs:{cols:"12",sm:"6"}},[r("CardItem",{attrs:{item:{path:{name:"photo-id",params:{id:e.photo._source.photo_no[0]}},label:e.photo._source._title[0],image:e.photo._source._image[0],manifest:e.photo._id,url:t.baseUrl+"/photo/"+e.photo._source._title[0]}}})],1)]:t._e()]}))],2)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;O()(component,{VBtn:$.a,VCard:R.a,VCardTitle:P.c,VCol:U.a,VContainer:V.a,VDivider:D.a,VRow:M.a})}}]);